---
title: "Examen de Calificación"
subtitle: ""
author: "Andres Gonzalez"
date:  "2024-07-12"#"`r withr::with_locale(new =c('LC_TIME' = 'es_ES'), code =format(Sys.time(),'%B %d, %Y'))`"
encoding: utf-8 #I finally found the source of this error -- a bib file outside my project that was imported and not checked. Yet, it took me over 2 days, and could have been avoided if pandoc returned filename and file location information in its error message.   
output:
  xaringan::moon_reader:
    chakra: libs/remark-latest.min.js
    includes:
#      in_header: mylibs/math.html
      after_body: ['mylibs/collapseoutput.js', 'mylibs/zoom.html', 'mylibs/timer.html']
    transition: slide
    lib_dir: libs
    css: ['animate.min.css', 'ninjutsu', 'mylibs/animate.css'] # xaringan-themer has something bad '\x93', had to include them as css
    self_contained: true # if true, fonts will be stored locally
    seal: false # show a title slide with YAML information
    nature:
      countdown: 90000 #60 segundos *2
      highlightStyle: github
      highlightLines: true # {{}} o * los pondrá como muy importantes  para destacar: # <<
      slideNumberFormat: '%current%'
      countIncrementalSlides: false
      ratio: '16:9' # alternatives '16:9' or '4:3' or others e.g. 13:9
      navigation:
        scroll: false # disable slide transitions by scrolling
#knit: pagedown::chrome_print
---
class: title-slide, middle, right, animated fadeOut


```{css, echo = F}
/* -------------------------------------------------------
 *
 *     !! This file was generated by xaringanthemer !!
 *
 *  Changes made to this file directly will be overwritten
 *  if you used xaringanthemer in your xaringan slides Rmd
 *
 *  Issues or likes?
 *    - https://github.com/gadenbuie/xaringanthemer
 *    - https://www.garrickadenbuie.com
 *
 *  Need help? Try:
 *    - vignette(package = "xaringanthemer")
 *    - ?xaringanthemer::style_xaringan
 *    - xaringan wiki: https://github.com/yihui/xaringan/wiki
 *    - remarkjs wiki: https://github.com/gnab/remark/wiki
 *
 *  Version: 0.4.2
 *
 * ------------------------------------------------------- */
@import url(https://fonts.googleapis.com/css?family=Arial:400,400i&display=swap);
@import url(https://fonts.googleapis.com/css?family=Arial+Narrow&display=swap);
@import url(https://fonts.googleapis.com/css?family=Arial+Narrow&display=swap);
@import url(https://fonts.googleapis.com/css?family=Arial+Narrow&display=swap);

:root {
  /* Fonts */
  --text-font-family: Arial;
  --text-font-is-google: 1;
  --text-font-family-fallback: -apple-system, BlinkMacSystemFont, avenir next, avenir, helvetica neue, helvetica, Ubuntu, roboto, noto, segoe ui, arial;
  --text-font-base: Arial;
  --header-font-family: 'Arial Narrow';
  --header-font-is-google: 1;
  --header-font-family-fallback: Arial;
  --code-font-family: 'Arial Narrow';
  --code-font-is-google: 1;
  --base-font-size: 20px;
  --text-font-size: 1rem;
  --code-font-size: 53%;
  --code-inline-font-size: 1em;
  --header-h1-font-size: 2.75rem;
  --header-h2-font-size: 2.25rem;
  --header-h3-font-size: 1.75rem;

  /* Colors */
  --text-color: #2f353b;
  --header-color: #666666;
  --background-color: #E6E6E6;
  --link-color: #003891;
  --text-bold-color: #EF9D2F;
  --code-highlight-color: rgba(255,255,0,0.5);
  --inverse-text-color: #E6E6E6;
  --inverse-background-color: #003891;
  --inverse-header-color: #E6E6E6;
  --inverse-link-color: #003891;
  --title-slide-background-color: #E6E6E6;
  --title-slide-text-color: #666666;
  --header-background-color: #003891;
  --header-background-text-color: #E6E6E6;
  --primary: #E6E6E6;
  --secondary: #003891;
}
/*lo agregué yo*/

html {
  font-size: var(--base-font-size);
}

body {
  font-family: var(--text-font-family), var(--text-font-family-fallback), var(--text-font-base);
  font-weight: 400;
  color: var(--text-color);
}
h1, h2, h3 {
  font-family: var(--header-font-family), var(--header-font-family-fallback);
  font-weight: 600;
  color: var(--header-color);
}
.remark-slide-content {
  background-color: var(--background-color);
  font-size: 1rem;
  background-image: url("https://raw.githubusercontent.com/AGSCL/DSPUCH/main/_figs/2024PPT_ESP/Diapositiva2.SVG");
  background-size: contain  !important;  /* Ensures the entire image is visible : cover era la anterior */
  background-position: center !important;
  background-repeat: no-repeat !important;
  /*padding: 0.4em 2.4em 0.4em 2.4em;*/
  /*height: 100vh;  /* Ensures the slide takes full viewport height */
  /*width: 100vh;*/
  /*height: 100%;*/
}
.remark-slide-content h1 {
  font-size: var(--header-h1-font-size);
}
.remark-slide-content h2 {
  font-size: var(--header-h2-font-size);
}
.remark-slide-content h3 {
  font-size: var(--header-h3-font-size);
}
.remark-code, .remark-inline-code {
  font-family: var(--code-font-family), Menlo, Consolas, Monaco, Liberation Mono, Lucida Console, monospace;
}
.remark-code {
  font-size: var(--code-font-size);
}
.remark-inline-code {
  font-size: var(--code-inline-font-size);
  color: #003891;
}
.remark-slide-number {
  color: #2f353b;
  opacity: 1;
  font-size: 0.9rem;
}
strong {
  font-weight: bold;
  color: var(--text-bold-color);
}
a, a > code {
  color: var(--link-color);
  text-decoration: none;
}
.footnote {
  position: absolute;
  bottom: 60px;
  padding-right: 4em;
  font-size: 0.9em;
}
.remark-code-line-highlighted {
  background-color: var(--code-highlight-color);
}
.inverse {
  background-color: var(--inverse-background-color);
  color: var(--inverse-text-color);
  
}
.inverse h1, .inverse h2, .inverse h3 {
  color: var(--inverse-header-color);
}
.inverse a, .inverse a > code {
  color: var(--inverse-link-color);
}
.title-slide, .title-slide h1, .title-slide h2, .title-slide h3 {
  color: var(--title-slide-text-color);
}
.title-slide {
  background-color: var(--title-slide-background-color);
  background-image: url("https://raw.githubusercontent.com/AGSCL/DSPUCH/main/_figs/2024PPT_ESP/Diapositiva1.SVG");
  background-size: 100% auto !important; /* Ensures the entire image is visible : cover era la anterior */
  /*background-position: center top !important; */
  background-repeat: no-repeat;
  /*padding: 0.4em 2.4em 0.4em 2.4em;*/
  width: 100% !important;
  height: 100vh; 
}
.title-slide .remark-slide-number {
  display: none;
}
/* Two-column layout */
.left-column {
  width: 20%;
  height: 92%;
  float: left;
}
.left-column h2, .left-column h3 {
  color: #00389199;
}
.left-column h2:last-of-type, .left-column h3:last-child {
  color: #003891;
}
.right-column {
  width: 75%;
  float: right;
  padding-top: 1em;
}
.pull-left {
  float: left;
  width: 47%;
}
.pull-right {
  float: right;
  width: 47%;
}
.pull-right + * {
  clear: both;
}
img, video, iframe {
  max-width: 100%;
}
blockquote {
  border-left: solid 5px #00389180;
  padding-left: 1em;
}
.remark-slide table {
  margin: auto;
  border-top: 1px solid #666;
  border-bottom: 1px solid #666;
}
.remark-slide table thead th {
  border-bottom: 1px solid #ddd;
}
th, td {
  padding: 5px;
}
.remark-slide table:not(.table-unshaded) thead,
.remark-slide table:not(.table-unshaded) tfoot,
.remark-slide table:not(.table-unshaded) tr:nth-child(even) {
  background: #FCFCFC;
}
table.dataTable tbody {
  background-color: var(--background-color);
  color: var(--text-color);
}
table.dataTable.display tbody tr.odd {
  background-color: var(--background-color);
}
table.dataTable.display tbody tr.even {
  background-color: #FCFCFC;
}
table.dataTable.hover tbody tr:hover, table.dataTable.display tbody tr:hover {
  background-color: rgba(255, 255, 255, 0.5);
}
.dataTables_wrapper .dataTables_length, .dataTables_wrapper .dataTables_filter, .dataTables_wrapper .dataTables_info, .dataTables_wrapper .dataTables_processing, .dataTables_wrapper .dataTables_paginate {
  color: var(--text-color);
}
.dataTables_wrapper .dataTables_paginate .paginate_button {
  color: var(--text-color) !important;
}

/* Horizontal alignment of code blocks */
.remark-slide-content.left pre,
.remark-slide-content.center pre,
.remark-slide-content.right pre {
  text-align: start;
  width: max-content;
  max-width: 100%;
}
.remark-slide-content.left pre,
.remark-slide-content.right pre {a
  min-width: 50%;
  min-width: min(40ch, 100%);
}
.remark-slide-content.center pre {
  min-width: 66%;
  min-width: min(50ch, 100%);
}
.remark-slide-content.left pre {
  margin-left: unset;
  margin-right: auto;
}
.remark-slide-content.center pre {
  margin-left: auto;
  margin-right: auto;
}
.remark-slide-content.right pre {
  margin-left: auto;
  margin-right: unset;
}

/* Slide Header Background for h1 elements */
.remark-slide-content.header_background > h1 {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  background: var(--header-background-color);
  color: var(--header-background-text-color);
  /*padding: 2rem 2.4em 1.5rem 2.4em;*/
  margin-top: 0;
  box-sizing: border-box;
}
.remark-slide-content.header_background {
  padding-top: 7rem;
}

@page { margin: 0; }
@media print {
  .remark-slide-scaler {
    width: 100% !important;
    height: 100% !important;
    transform: scale(1) !important;
    top: 0 !important;
    left: 0 !important;
  }
}

.primary {
  color: var(--primary);
}
.bg-primary {
  background-color: var(--primary);
}
.secondary {
  color: var(--secondary);
}
.bg-secondary {
  background-color: var(--secondary);
}

.remark-slide-container {
  transition: transform 0.5s ease;
}

/* Extra CSS */
.remark-slide-scaler {
  overflow-y: auto;
}
.gray {
  color: #aaaaaa;
}
.red {
  color: #A4222B;
}
.darkgreen {
  color: #45503B;
}
.darkred {
  color: #591F0A;
}
.small {
  font-size: 90%;
}
.pull_c {
  float: center;
  width: 30%;
  height: 50%;
  padding-left: 40%;
}
.pull_c_title {
  height: 90%;
}
.pull_l_70 {
  float: left;
  width: 72%;
  font-size: 90%;
}
.pull_r_30 {
  float: right;
  width: 23%;
  font-size: 90%;
}
.pull_left {
  float: left;
  width: 47%;
  height: 100%;
  padding-right: 2%;
}
.pull_right {
  float: right;
  width: 47%;
  height: 100%;
  padding-left: 2%;
}
.small_left {
  float: left;
  width: 47%;
  height: 50%;
  padding-right: 2%;
}
.small_right {
  float: right;
  width: 47%;
  height: 50%;
  padding-left: 2%;
}
.algo_right {
  float: right;
  padding-left: 2%;
}
.left_code {
  float: left;
  width: 47%;
  height: 100%;
  padding-right: 2%;
  font: Roboto;
}
.code_out {
  float: right;
  width: 47%;
  height: 100%;
  padding-left: 2%;
  font: Roboto;
}
.text_180 {
  font-size: 180%;
}
.text_170 {
  font-size: 170%;
}
.text_160 {
  font-size: 160%;
}
.text_150 {
  font-size: 150%;
}
.text_140 {
  font-size: 140%;
}
.text_130 {
  font-size: 130%;
}
.text_120 {
  font-size: 120%;
}
.text_110 {
  font-size: 110%;
}
.text_110 {
  font-size: 110%;
}
.text_100 {
  font-size: 100%;
}
.code_10 {
  code-inline-font-size: 60%;
  overflow-y: scroll !important;
  overflow-x: scroll !important;
  max-height: 50vh !important;
  line-height: 0.75em;
}
.code_10_pre {
  code-inline-font-size: 60%;
  overflow-y: scroll !important;
  overflow-x: scroll !important;
  max-height: 15vh !important;
  line-height: 0.75em;
  min-height: 0.5em;
}
.code_15 {
  code-inline-font-size: 15%;
  overflow-y: scroll !important;
  overflow-x: scroll !important;
  max-height: 10vh !important;
}
.text_90 {
  font-size: 90%;
}
.text_80 {
  font-size: 80%;
}
.text_75 {
  font-size: 75%;
}
.text_70 {
  font-size: 70%;
}
.text_65 {
  font-size: 65%;
}
.text_62 {
  font-size: 62%;
}
.text_60 {
  font-size: 60%;
}
.text_50 {
  font-size: 50%;
}
.text_40 {
  font-size: 40%;
}
.text_30 {
  font-size: 30%;
}
.text_20 {
  font-size: 20%;
}
.line_space_15 {
  line-height: 1.5em;;
}
.line_space_13 {
  line-height: 1.3em;;
}
.line_space_11 {
  line-height: 1.1em;;
}
.line_space_15 {
  line-height: 1.5em;;
}
.line_space_09 {
  line-height: 0.9em;;
}
.line_space_07 {
  line-height: 0.7em;;
}
.line_space_05 {
  line-height: 0.5em;;
}
.largest {
  font-size: 2.488em;;
}
.larger {
  font-size: 2.074em;;
}
.large {
  font-size: 1.44em;;
}
.small {
  font-size: 0.833em;;
}
.smaller {
  font-size: 0.694em;;
}
.smallest {
  font-size: 0.579em;;
}
.limity150 {
  max-height: 150px;;
  overflow-y: auto;;
}
.tiny_text {
  font-size: 70%;
}
.large_text {
  font-size: 150%;
}
.slide_blue {
  background-color: #FEDA3F;
  color: #3C3C3B;
}
.bottom_center {
  margin: 0;
  position: absolute;
  top: 90%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
.bottom_center2 {
  margin: 0;
  position: fixed; /* Cambiar a 'fixed' para fijar la posición */
  bottom: 80px; /* Ajustar el valor para posicionarlo desde la parte inferior de la pantalla */
  left: 50%; /* Asegurar que esté centrado horizontalmente en la pantalla */
  transform: translateX(-50%); /* Centrarse horizontalmente */
}

.down_center {
  margin: 0;
  position: absolute;
  top: 80%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
.down_center2 {
  margin: 0;
  position: absolute;
  top: 98%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
.center_image {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
.down_left {
  margin: 0;
  position: absolute;
  top: 80%;
  left: 22%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
.down_right {
  margin: 0;
  position: absolute;
  top: 80%;
  left: 72%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}
slides > slide {
  overflow-x: auto !important;
  overflow-y: auto !important;
}
.superbigimage {
  white-space: nowrap;
  overflow-y: scroll;
}
/* https://www.garrickadenbuie.com/blog/better-progressive-xaringan/*/
.bold-last-item > ul > li:last-of-type,
.bold-last-item > ol > li:last-of-type {
  font-weight: bold;
}

.section{
  background-image: linear-gradient(#003891 90%, : #EF9D2F !important;/* background-color: #ff7f50; */
  background-size: contain  !important;  /* Ensures the entire image is visible : cover era la anterior */
  background-position: center !important;
  background-repeat: no-repeat !important;
}
.gradient-slide {
  background: linear-gradient(45deg, #003891, #EF9D2F); /* Adjust the colors and direction as needed */
  color: var(--background-color); /* Adjust text color for better contrast */
}

/* Incluye aquí el CSS proporcionado anteriormente */
table {
  width: 100%;
  border-collapse: collapse;
  font-size: 10px;
}

th, td {
  border: 1px solid #000;
  padding: 3px;
  margin: 0;
}

th {
  background-color: #e0e0e0;
}

th:nth-child(1), td:nth-child(1) {
  width: 20%;
}
th:nth-child(2), td:nth-child(2) {
  width: 15%;
}
th:nth-child(3), td:nth-child(3) {
  width: 65%;
}

.table-container {
  max-width: 100%;
  max-height: 500px;
  overflow-x: auto;
  overflow-y: auto;
}

.move-right {
  padding-left: 50px !important; /* Adjust the value as needed */
  padding-top: -20px !important;
  /* Alternatively, you can use margin-left */
  /* margin-left: 50px; */
}

.footnote2 {
/*  bottom: 60px;*/
  padding-right: 4em !important;
  font-size: 2.4px !important;
  font-style: italic !important;
}
/*https://pkg.garrickadenbuie.com/xaringanExtra/panelset/#1*/
.panelset {
  --panel-tab-foreground: currentColor;
  --panel-tab-active-foreground: #0051BA;
  --panel-tab-hover-foreground: #8b0000;
  --panel-tabs-border-bottom: #ddd;
  --panel-tab-inactive-opacity: 0.5;
  --panel-tab-font-family: Arial;\
}
.left-column2 {
    width: 30%;
    height: 92%;
    float: left;
}
.right-column2 {
  width: 69%;
  float: right;
  padding-top: 1em;
}
</style>

```

```{r setup_theme0, include = FALSE}
rm(list=ls());gc()
unlink("*_cache", recursive = TRUE)
if(!grepl("4.4.0",R.version.string)){stop("Different version (must be 4.4.0)")}
#, 'libs/my-theme.css'
#load(paste0(sub("$\\/","",sub("2019 \\(github\\)/SUD_CL","2022 \\(github\\)",here::here())),"/11_pres.RData"))
options(servr.daemon = TRUE)
```



```{r setup, include = FALSE}
local({r <- getOption("repos")
       r["CRAN"] <- "http://cran.r-project.org" 
       options(repos=r)
})
pacman::p_unlock(lib.loc = .libPaths()) #para no tener problemas reinstalando paquetes

if(!require(pacman)){install.packages("pacman")}
pacman::p_load(devtools, here, showtext, ggpattern, RefManageR, pagedown, magick, bibtex, DiagrammeR, xaringan, xaringanExtra, xaringanthemer, fontawesome, tidyverse, psych, cowplot, pdftools, mstate, showtext, compareGroups, chilemapas, choroplethrAdmin1,  choroplethr, choroplethrMaps, ggiraph, sf, distill, qrcode, pdftools, dagitty, ggdag, geepack, survey, ipw, reshape, widgetframe, geeM, MuMIn, pagedown, ggpubr, plotly, ggrepel, install=F)

if(!require(xaringanBuilder)){devtools::install_github("jhelvy/xaringanBuilder",upgrade = "never")}
if(!require(icons)){remotes::install_github("mitchelloharawild/icons",upgrade = "never")}

test_fontawesome<- function(x="github"){
tryCatch({
  invisible(fontawesome::fa(name = x))
  return(message("fontawesome installed"))
},
# ... but if an error occurs, tell me what happened: 
error=function(error_message) {
  message("Installing fontawesome")
  icons::download_fontawesome()  
})
}

if(!require(rnaturalearth)){install.packages("rnaturalearth");library(rnaturalearth)}
if(!require(rnaturalearthdata)){install.packages("rnaturalearthdata");library(rnaturalearthdata)}
if(!require(rnaturalearthhires)){install.packages("rnaturalearthhires",repos="http://packages.ropensci.org", type = "source");library(rnaturalearthhires)}
if(!require(pagedown)){install.packages("pagedown");library(pagedown)}
if(!require(ggpubr)){install.packages("ggpubr");library(ggpubr)}
if(!require(plotly)){install.packages("plotly");library(plotly)}
if(!require(htmlwidgets)){install.packages("htmlwidgets");library(htmlwidgets)}
if(!require(ggrepel)){install.packages("ggrepel");library(ggrepel)}
if(!require(pROC)){install.packages("pROC");library(pROC)}
if(!require(Epi)){install.packages("Epi");library(Epi)}
if(!require(emo)){devtools::install_github("hadley/emo");library(emo)} #https://github.com/hadley/emo
if(!require(etm)){install.packages("etm");library(etm)}
if(!require(ggraph)){install.packages("ggraph");library(ggraph)}
if(!require(tidygraph)){install.packages("tidygraph");library(tidygraph)}
if(!require(igraph)){install.packages("igraph");library(igraph)}
if(!require(scatterpie)){install.packages("scatterpie");library(scatterpie)}


options(scipen=2) #display numbers rather scientific number

#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:
#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:#:

vec_col<-c("#660600","#6F3930","#745248","#786B60","#E6E6E6","#738FBC","#003891","#3C5279","#786B60","#B48448","#EF9D2F","#D99155","#E3D1C2","#E0BC9E","#ABB0BF","#835F69","#5A0D13")
plot_prueba<-barplot(1:length(vec_col), col=vec_col)

#https://github.com/yihui/xaringan/issues/260
#https://coolors.co/21177a-fe4a17-788aa3-45503b
# style_duo( 
#   primary_color = "#E6E6E6", ##E6E6E6
#   secondary_color = "#003891",
#   text_color = "#2f353b", 
#   text_bold_color = "#EF9D2F", ##92B6B1   #fdecef  #F9C784   ##CAE7B9 ##BDC667 ##B9D8C2 ##591F0A ##D6FFF6 #45503B
#   #base_color = '#aaaaaa',
# #  background_color = 'white',
#   background_position = 'center',
#   header_font_google = google_font("Arial Narrow"),
#   text_font_google   = google_font("Arial", "400", "400i"),
#   code_font_google   = google_font("Arial Narrow"),
#   code_font_size = '53%', #sirve
#   padding = "0.4em 2.4em 0.4em 2.4em",
#   extra_fonts = list(google_font("Arial Narrow")),
#   title_slide_background_image = "./_figs/2024PPT_ESP/Diapositiva1.svg",
#   title_slide_background_size = "cover",
#   background_image = "./_figs/2024PPT_ESP/Diapositiva2.svg",
#   background_size = "cover",
#   extra_css =
#   list(
#   ".remark-slide-scaler" = list("overflow-y" = "auto"), # para no tener limites de extensión
#  # ".remark-slide-number" = list("display" = "none"), #oculta el reloj también
#  # "pre"= list("line-height"= "0.2em"),
#   ".gray"   = list(color = "#aaaaaa"),
#   ".red"   = list(color = "#A4222B"),
#   ".darkgreen"   = list(color = "#45503B"),
#   ".darkred"   = list(color = "#591F0A"),
#   ".small" = list("font-size" = "90%"),
#   ".pull_c" = list("float" = "center","width" = "30%", "height" = "50%", "padding-left" = "40%"),
#   ".pull_c_title" = list("height" = "90%"),
#   ".pull_l_70" = list("float"= "left","width"= "72%", "font-size"= "90%"),
#   ".pull_r_30" = list("float"= "right","width"= "23%", "font-size"= "90%"),
#   ".pull_left"  = list("float"= "left","width"= "47%", "height"= "100%", "padding-right"= "2%"),
#   ".pull_right" = list("float"= "right","width"= "47%", "height"= "100%", "padding-left"= "2%"),
#   ".small_left"  = list("float"= "left", "width"= "47%", "height"= "50%", "padding-right"= "2%"),
#   ".small_right" = list("float"= "right","width"= "47%", "height"= "50%", "padding-left"= "2%"),
#   ".left_code" = list("float"="left","width"="47%","height"="100%","padding-right"="2%",    "font"="Roboto"),
#   ".code_out"  = list("float"="right","width"="47%","height"="100%","padding-left"="2%",    "font"="Roboto"),
#   ".text_180" = list("font-size" = "180%"),
#   ".text_170" = list("font-size" = "170%"),
#   ".text_160" = list("font-size" = "160%"),    
#   ".text_150" = list("font-size" = "150%"),
#   ".text_140" = list("font-size" = "140%"),  
#   ".text_130" = list("font-size" = "130%"),
#   ".text_120" = list("font-size" = "120%"),
#   ".text_110" = list("font-size" = "110%"),
#   ".text_110" = list("font-size" = "110%"),
#   ".text_100" = list("font-size" = "100%"),
#   ".code_10" = list("code-inline-font-size"= "60%",
#                     "overflow-y" = "scroll !important",
#                     "overflow-x" = "scroll !important",
#                     "max-height" = "50vh !important",# 50% altura viewport
#                     "line-height"= "0.75em"),
#    ".code_10_pre" = list("code-inline-font-size"= "60%",
#                     "overflow-y" = "scroll !important",
#                     "overflow-x" = "scroll !important",
#                     "max-height" = "15vh !important",
#                     "line-height"= "0.75em",
#                     "min-height"="0.5em"
#                     ),
#   ".code_15" = list("code-inline-font-size"= "15%",
#                     "overflow-y" = "scroll !important",
#                     "overflow-x" = "scroll !important",
#                     "max-height" = "10vh !important"),
#   ".text_90" = list("font-size" = "90%"),
#   ".text_80" = list("font-size" = "80%"),
#   ".text_70" = list("font-size" = "70%"),
#   ".text_65" = list("font-size" = "65%"),
#   ".text_60" = list("font-size" = "60%"),
#   ".text_50" = list("font-size" = "50%"),
#   ".text_40" = list("font-size" = "40%"),
#   ".text_30" = list("font-size" = "30%"),
#   ".text_20" = list("font-size" = "20%"),
#   ".line_space_15" = list("line-height" = "1.5em;"),
#   ".line_space_13" = list("line-height" = "1.3em;"),
#   ".line_space_11" = list("line-height" = "1.1em;"),
#   ".line_space_15" = list("line-height" = "1.5em;"),
#   ".line_space_09" = list("line-height" = "0.9em;"),
#   ".line_space_07" = list("line-height" = "0.7em;"),
#   ".line_space_05" = list("line-height" = "0.5em;"),
#   ".largest" =  list("font-size" = "2.488em;"),
#   ".larger" =  list("font-size" = "2.074em;"),
#   ".large" =  list("font-size" = "1.44em;"),
#   ".small" =  list("font-size" = "0.833em;"),
#   ".smaller" =  list("font-size" = "0.694em;"),
#   ".smallest" =  list("font-size" = "0.579em;"),
#   ".limity150" = list("max-height" = "150px;",
#                      "overflow-y" = "auto;"
#       ),
#     ".tiny_text" = list(
#       "font-size"= "70%"
#       ),
#     ".large_text" = list(
#       "font-size"= "150%"
#       ),
#     ".slide_blue" = list(
#       "background-color" = "#FEDA3F",
#       "color" = "#3C3C3B"
#       ),
#       ".bottom_center" = list(
#     margin  = "0",
#     position = "absolute",
#     top      = "90%",
#     left     = "50%",
#     '-ms-transform' = "translate(-50%, -50%)",
#     transform = "translate(-50%, -50%)"
#     ),
#       ".down_center" = list(
#     margin  = "0",
#     position = "absolute",
#     top      = "80%",
#     left     = "50%",
#     '-ms-transform' = "translate(-50%, -50%)",
#     transform = "translate(-50%, -50%)"
#     ),
#   ".center_image" = list(
#     margin  = "0",
#     position = "absolute",
#     top      = "50%",
#     left     = "50%",
#     '-ms-transform' = "translate(-50%, -50%)",
#     transform = "translate(-50%, -50%)"
#     ),
#     ".down_left" = list(
#     margin  = "0",
#     position = "absolute",
#     top      = "80%",
#     left     = "22%",
#     '-ms-transform' = "translate(-50%, -50%)",
#     transform = "translate(-50%, -50%)"
#     ),
#      ".down_right" = list(
#     margin  = "0",
#     position = "absolute",
#     top      = "80%",
#     left     = "72%",
#     '-ms-transform' = "translate(-50%, -50%)",
#     transform = "translate(-50%, -50%)"
#     ),
#     "slides > slide" = list(
#     "overflow-x"  = "auto !important",
#     "overflow-y" = "auto !important"
#     ),
#  #   "pre" = list(
# #    "white-space"  = "pre !important",
# #    "overflow-y" = "scroll !important",
# #    "max-height" = "40vh !important",
# #    "font-size" = "0.8em"
# #    ),
#     ".superbigimage" = list(
#     "white-space"  = "nowrap",
#     "overflow-y" = "scroll"
#     )
#   )
# )

options(htmltools.preserve.raw = FALSE)

#knitr::opts_chunk$set(comment = NA) # lo saqué pa probar por si
knitr::opts_chunk$set(dpi=720)
#options(htmltools.preserve.raw = FALSE)#A recent update to rmarkdown (in version 2.6) changed how HTML widgets are included in the output file to use pandoc's raw HTML blocks. Unfortunately, this feature isn't compatible with the JavaScript markdown library used by xaringan. You can disable this feature and resolve the issue with htmlwidgets in xaringan slides by setting
#https://stackoverflow.com/questions/65766516/xaringan-presentation-not-displaying-html-widgets-even-when-knitting-provided-t/65768952#65768952

xaringanExtra::use_scribble() #son los lapices
xaringanExtra::use_tile_view()
xaringanExtra::use_panelset()
xaringanExtra::use_editable(expires = 1)
#xaringanExtra::use_fit_screen()

check_code <- function(expr, available){
  if(available){
    eval(parse(text = expr))
  } else {
    expr
  }
}
path2<-getwd()
```
```{r, load_refs, include=F, eval=T, cache=FALSE}
library(RefManageR)
BibOptions(check.entries = FALSE,
           bib.style = "numeric",
           cite.style = "numeric",
           style = "markdown",
           super = TRUE,
           hyperlink = FALSE,
           dashed = FALSE)
warning(paste0("./libreria_generica.txt"))

myBib <- ReadBib("./libreria_generica.txt", check = FALSE,  .Encoding="latin1")
```

.move-right[
.line_space_15[ 
## .text_60[Predicción del tiempo a la readmisión y mortalidad en adultos<br>en tratamiento por trastornos por uso de sustancias en Chile:<br>Un estudio de cohorte retrospectivo de 12 años]
]

.line_space_11[

.bg-text[

.text_80[Director de tesis: Jay Kaufman<br>Co-director de tesis: Álvaro Castillo-Carniglia<br>Estudiante: Andrés González-Santa Cruz]

.text_50[gonzalez.santacruz.andres@gmail.com] [`r fontawesome::fa(name = "github")`](https://github.com/AGSCL) [`r fontawesome::fa(name = "orcid", fill="green")`](https://orcid.org/0000-0002-5166-9121)
]
]
]

???
*#_#_#_#_#_#_#_#_#_#_
**NOTA**
*#_#_#_#_#_#_#_#_#_#_

Muy Buenos días

A continuación, les voy a presentar mi proyecto de tesis doctoral titulado **Predicción del tiempo a la readmisión y mortalidad en adultos en tratamiento por trastornos por uso de sustancias en Chile: Un estudio de cohorte retrospectivo de 12 años**.

Acompañantes en este Proceso

- Tutor: Jay kaufman, quien por motivos de agenda no pudo asistir 
- Co-Tutor: Álvaro Castillo, quien se encuentra aquí

---
layout: true
class: animated fadeIn 
---
class: animated fadeIn 
## Tratamientos- <br>situación general

.left-column2[
Principales objetivos $`r Cite(myBib, c("babor2021","White2012", "world_health_organization_world_2023"))`$ 
.line_space_09[.text_60[
- Finalidad: ¿abstinencia?, ¿reducción daños o consumo?, ¿recaídas?
- **Recuperación** (Gomez-Restrepo)
]]

Modalidades e intervenciones $`r Cite(myBib, c("babor2021","White2012"))`$ 
.line_space_09[.text_60[
- Farmacológica, psicológica y comunitaria
- Ambulatoria, internación y residencial
]]
]

.right-column2[
```{r "image-lousiana-trtmnts", echo=FALSE,  fig.align="left", out.width=250}
image_colorize(opacity = 70, image_read(path = 'https://drughelpline.org/wp-content/uploads/2023/07/Louisiana3-1024x683.jpg'), "#666666") 
```
```{r "trtmnts-quality-stds", echo=FALSE, eval=F,  fig.align="right", out.width=250, dev.args = list(bg = 'transparent')}

library(ggplot2)
library(grid)# Definición de las etiquetas para las dimensiones de calidad
labels <- c("Segura",
            "Efectiva",
            "Centrada en\nel paciente",
            "Oportuna",
            "Eficiente",
            "Equitativa")

# Coordenadas para el hexágono
points <- data.frame(x = c(0.5, 1, 1, 0.5, 0, 0), 
                     y = c(0, 0.25, 0.75, 1, 0.75, 0.25))

# Creación del gráfico
ggplot() + 
  geom_polygon(data = points, aes(x, y), fill = '#66666624', alpha = 0.24) +
  # geom_text(data = points, aes(x, y, label = labels), 
  #           hjust = 0.5, vjust = 0.5, size = 6) +
  geom_text(data = points, aes(x, y, label = labels), color="#2f353b",
            hjust = c(0.5, 1.2, 1.2, 0.5, -0.2, -0.2), 
            vjust = c(-0.5, 0.5, 0.5, 1.5, 0.5, 0.5), size = 12) +
  theme_void() + 
  theme(plot.title = element_text(hjust = 0.5, size = 20, face = "bold"))+
  labs(caption="Fuente: Elaboración propia a partir de WHO-UNODC. 2020.\nInternational Standards for the Treatment of Drug Use Disorders. Traducción no oficial. Obtenida desde:\n https://www.unodc.org/documents/drug-prevention-and-treatment/ES_UNODC-WHO_International_Standards_Treatment_Drug_Use_Disorders_April_unoff_2020.pdf")

# <div style="width: 500px; height: 100px; padding: 0px; font-size: x-small; font-style: italic; line-height: 1;">
# </div>
```
```{r "goal-trtmnts", eval=T, echo=FALSE, fig.align="right", message=FALSE, warning=FALSE, dev.args = list(bg = 'transparent'), out.width=250}
par(mar=c(0,0,0,0))
par(bg=NA)

nodes <- data.frame(
    name = c("Metas", "Mejorar calidad de\nvida y bienestar", "Reducir consumo\nproblemático", 
             "Mitigar síntomas\nasociados a recaídas", "Mejorar estatus de\nsalud y funcionalidad", 
             "Considerar factores\nde riesgo contextuales", "Prevenir consumo\nfuturo perjudicial")
)

edges <- data.frame(
    from = rep("Metas", 6),
    to = c("Mejorar calidad de\nvida y bienestar", "Reducir consumo\nproblemático", 
             "Mitigar síntomas\nasociados a recaídas", "Mejorar estatus de\nsalud y funcionalidad", 
             "Considerar factores\nde riesgo contextuales", "Prevenir consumo\nfuturo perjudicial")
)

# Convertir a objeto tbl_graph
graph <- tbl_graph(nodes = nodes, edges = edges, directed = TRUE)
# Aplicar el layout con un número alto de iteraciones
layout <- layout_with_fr(graph, niter = 5e6)

# Convertir el layout a data frame para su uso en ggraph
V(graph)$x <- layout[,1]
V(graph)$y <- layout[,2]

# Ajustar las posiciones para acercar los nodos al centro
V(graph)$x <- V(graph)$x * 0.01
V(graph)$y <- V(graph)$y * 0.01

# Crear el gráfico de red con ggraph
p <- ggraph(graph, layout = 'manual', x = V(graph)$x, y = V(graph)$y) + 
  geom_edge_link(aes(), 
                 arrow = arrow(length = unit(3, 'mm')), 
                 start_cap = circle(3, 'mm'), 
                 end_cap = circle(3, 'mm'), # Ajusta la longitud de la flecha aquí
                 color = "#ABB0BF", 
                 linewidth = 1) +
  geom_node_label(aes(label = name,  fontface = ifelse(name == "Metas", "bold", "plain")), repel = TRUE, size = 7.5, check_overlap =T) +
    theme_void() +
    theme(
    legend.position = 'none',
    plot.margin = unit(c(0, 0, 0, 0), "cm"),  # Eliminar márgenes
    panel.spacing = unit(0, "cm")             # Eliminar espaciado del panel
  ) +
  ggtitle(NULL)

p

```
]

???
*#_#_#_#_#_#_#_#_#_#_
**NOTA**
*#_#_#_#_#_#_#_#_#_#_

- **Objetivos**: Una respuesta social organizada a este problema han sido los programas de tratamiento. Estos conviven con otras políticas más punitivistas.

**Metas de los Programas**
- Mejorar calidad de vida y bienestar.
- Reducir consumo problemático.
- Mitigar síntomas asociados a recaídas.
- Mejorar estatus de salud y funcionalidad.
- Considerar factores de riesgo contextuales.
- Prevenir consumo futuro perjudicial.

*(Referencia: WHO y UNODC. International standards for the treatment of drug use disorders)*

**Finalidades de los Tratamientos**
- Abstinencia.
- Reducción de daños y patrones de consumo.
- Reducción de recaídas.

**Definición de Recuperación**
- Según Restrepo-Guzmán et al., "un estado de vida sin limitaciones o consecuencias negativas derivadas del consumo de sustancias".
- Algunas personas dejan las sustancias de forma natural, otras requieren tratamiento estructurado.

- **Objetivos**: Una respuesta social organizada a este problema han sido los programas de tratamiento. Estos conviven con otras políticas más punitivistas.

**Metas de los Programas** : - Mejorar calidad de vida y bienestar. ; - Reducir consumo problemático.; - Mitigar síntomas asociados a recaídas.; - Mejorar estatus de salud y funcionalidad.; - Considerar factores de riesgo contextuales; - Prevenir consumo futuro perjudicial.
*(Referencia: WHO y UNODC. International standards for the treatment of drug use disorders)*

- **Tipos y modalidades**: Existen múltiples tipos, tanto farmacológicos, de base psicológica y comunitaria. Se entregan en viarias configuraciones (por ej., ambulatoria [menos disruptiva], internación [para síntomas de abstinencia severos y alto riesgo de recaídas] y residencial [de mayor duración, para casos severos, con mayor compromiso]) dependiendo de factores contextuales y patrones de consumo.

- Se busca que los tratamientos se entiendan en un continuo de cuidados, de cuidado escalonado. También hay intervenciones de menor intensidad o en tecnológica que se encuentran en auge.

---
class: animated fadeIn 
## Tratamientos- <br>Hispanoamérica y Chile
.left-column2[
Situación en hispanoamérica y Chile $`r Cite(myBib, c("Marin2018","servicio_nacional_para_la_prevencion_y_rehabilitacion_del_consumo_de_drogas_y_alcohol_senda_decimo_2022-1","oecd_health_2023", "vicente_prevalencias_2016","inter-american_drug_abuse_control_commission_cicad_report_2019", "PrezGmez2016", "ToroDevia2023"))`$ 
.line_space_09[.text_60[
- Personal especializado
  
- Alcance áreas rurales
  
Cobertura
]]
+ Instituciones y lineamientos  $`r Cite(myBib, c("RN155", "mateo-pinones_evidence-based_2022"))`$  
.line_space_09[.text_60[
- SENDA, tratamientos, FONASA
  
- Define estándares, compra y supervisa 
]]
]
.right-column2[

```{r "qalat", eval=T, echo=FALSE, fig.align="right", message=FALSE, warning=FALSE, dev.args = list(bg = 'transparent'), out.width=250}
magick::image_transparent(magick::image_transparent(image_read(path = './_figs/qalat.png'), "white"), "lightgray")
```
```{r "senda", eval=T, echo=FALSE, fig.align="left", message=FALSE, warning=FALSE, dev.args = list(bg = 'transparent'), out.width=250}
magick::image_transparent(magick::image_transparent(image_read(path = './_figs/LogoSENDA.png'), "white"), "lightgray")
```
]

???
*#_#_#_#_#_#_#_#_#_#_
**NOTA**
*#_#_#_#_#_#_#_#_#_#_
- **Situación en latinoamérica y chile**: Sistemas de salud fragmentados (en público y privado), acceso limitado a recursos y tratamiento para ambos. Los tratamientos de base comunitaria son dominantes, aunque se han constatado algunas pocas terapias basasdas en la fe y coercitivas.

- **Particularmente en chile**: fuerza de trabajo insuficiente en cuidados de salud vs. promedios OECD; limitada disponibilidad de servicios especializados en áreas rurales, cobertura limitada (si bien no del todo comparables, 1/10 consumidores problemáticos de sustancias recibe tratamiento de los que lo requieren de acuerdo a estimaciones de la Encuesta de población general al 2018, vs. globalmente es 1/8 y para alcohol 1/5), existen desafíos a la coordinación entre instituciones

[World Health Organization. World health statistics 2023: monitoring health for the SDGs, Sustainable Development Goals. Genève, Switzerland: World Health Organization; 2023.]

- **Respecto a las instituciones en Chile**: SENDA (Servicio Nacional para la Prevención y Rehabilitación de Drogas y Alcohol), tiene una importante cobertura de tratamientos TUS (tratamientos con financiamiento público, que representan al 81% de la población), son tratamientos de carácter voluntario con opciones de derivación. SENDA define estándares, compra y supervisa la entrega tratamientos [20].

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

La definición de consumo problemático de drogas considera a quienes presentan síntomas de abuso de alcohol según DSM-IV y/o presencia de síntomas de abuso DSM-IV o dependencia según CIE-10 para usuarios de último año de marihuana, cocaína y/o pasta base.

[21] Ministerio de Salud[MINSAL]. Norma y orientaciones técnicas de los planes de tratamiento y rehabilitación para personas adultas con problemas derivados del consumo de drogas. Legal Rule or Regulation.
URL: https://www.senda.gob.cl/wp-content/uploads/2012/08/OrientacionesTecnicas_CentrosdeTratamiento.pdf.

---
class: bold-last-item, animated, fadeIn 
## Desenlaces posteriores<br>al tratamiento evitables

### Mediciones imperfectas pero útiles:

???
*#_#_#_#_#_#_#_#_#_#_
**NOTA**
*#_#_#_#_#_#_#_#_#_#_
Mediciones imperfectas de **impacto** del tratamiento a posteriori, pero útiles:

- A **nivel general** y globalmente, el impacto del tratamiento se ha medido en reducción de patrones de consumo, sintomatología psicológica y vinculados con el funcionamiento social (ej., conducta delictiva, educación, ocupación). El foco ha estado puesto en indicadores clínicos y de seguimiento a corto plazo (hasta 2 años), junto con beneficios económicos asociados (ej., uso de servicios de urgencia y criminalidad)

- no hay un gold standard para ver resultados. Se recomienda recurrir a más de uno. Si bien son imperfectas, son útiles para ver consecuencias sobre pacientes, familiares, sistemas de salud, particularmente si son no planeados y evitables.

--

- Readmisiones $`r Cite(myBib, c("Moss2020","RN246", "RN223", "RN438", "Donisi2016"))`$

???
*#_#_#_#_#_#_#_#_#_#_
**NOTA**
*#_#_#_#_#_#_#_#_#_#_

**Readmisión**: Si bien es parte de la administración de una enfermedad crónica más que una falla de un tratamiento, puede indicar la dificultad para derivar a una persona a un tratamiento de menor intensidad o en la que falla el dispositivo de tratamiento escalonado o continuo de tratamientos. Particularmente, puede ser útil como proxy de si los centros entregan herramientas efectivas para reducir las necesidades o como un criterio de desempeño, mientras no se utilice para retención prolongada. Por ej., entre los criterios de desempeño para el tratamiento de los trastornos por consumo de alcohol según la **Sociedad Americana de Medicina de Adicción (ASAM)**, la medida número siete apunta a la readmisión hospitalaria y residencial tras los episodios de tratamiento. 

- La readmisión se vincula a múltiples resultados negativos post-tratamiento, incluida la mortalidad, que viene a continuación
[
140. 	Donisi V, Tedeschi F, Wahlbeck K, Haaramo P, Amaddeo F. Pre-discharge factors predicting readmissions of psychiatric patients: a systematic review of the literature. BMC Psychiatry. 16 de diciembre de 2016;16(1):449.
141. 	Andersson HW, Wenaas M, Nordfjærn T. Relapse after inpatient substance use treatment: A prospective cohort study among users of illicit substances. Addict Behav. 2019;90:222–8.
142. 	Eastwood B, Peacock A, Millar T, Jones A, Knight J, Horgan P, et al. Effectiveness of inpatient withdrawal and residential rehabilitation interventions for alcohol use disorder: A national observational, cohort study in England. J Subst Abuse Treat. 2018/04/03 ed. mayo de 2018;88:1–8.
143. 	Hansen EM, Mejldal A, Nielsen AS. Predictors of Readmission Following Outpatient Treatment for Alcohol Use Disorder. Alcohol Alcohol Oxf Oxfs. 2020;55(3):291–8.
144. 	Moon SJE, Lee H. Relapse to substance use: A concept analysis. Nurs Forum (Auckl). 2020;55(3):523–30.
]

--

- Mortalidad $`r Cite(myBib, c("Peacock2020","Laine2022", "Vallersnes2018", "RN438", "Donisi2016"))`$

???
*#_#_#_#_#_#_#_#_#_#_
**NOTA**
*#_#_#_#_#_#_#_#_#_#_

- La mortalidad es un componente clave si se consideran ciertas limitaciones. Ha sido estudiado mayormente en consumidores de opioides en las últimas décadas, junto con personas con comorbilidades psiquiátricas. También han utilizado registros de hospitalizaciones y de mortalidad para ello. No siempre indican calidad del tratamiento; muchas veces los tratamientos no contemplan individuos no tratados con patrones de consumo severos y otras condiciones asociadas a mayor mortalidad (Bargagli et al.).

- Se ha encontrado que el tratamiento se ha vinculado a menores tasas de mortalidad.

- El foco ha estado en mortalidad por todas las causas, causas específicas, daño autoinflingido y sobredosis. Identificar factores asociados más allá de estilos de vida saludables es clave.

- Las ventanas de tiempo de estudio han sido variadas, desde un mes posterior a tratamiento hasta 10 años.

---
class: bold-last-item, animated, fadeIn 
## Factores capaces de predecir<br>desenlaces post-tratamiento adversos

.pull-left[
- Modelo de Ronald Andersen de utilización de servicios de salud (1995) $`r Cite(myBib, c("portilla_huidobro_factores_2015", "Andersen1995"))`$

- Predisponentes

- Necesidad percibida

- Habilitadores

  - MODALIDAD
]

.pull-right[
```{r "diagrama", echo=FALSE, fig.align="center", message=FALSE, warning=FALSE, dev.args=list(bg = 'transparent'), out.width=300}
par(mar=c(0,0,0,0))
par(bg=NA)
magick::image_transparent(magick::image_transparent(image_read(path = './_figs/diagram.webp'), "white"), "lightgray")
```
]

???
*#_#_#_#_#_#_#_#_#_#_
**NOTA**
*#_#_#_#_#_#_#_#_#_#_

Se ha utilizado el modelo de **Ronald anderson**, por su generalizabilidad y la utilidad de su un modelo de agrupación de predictores.

- En base a una tesis previa para identificar predictores, para Magíster en salud pública, elaborada por Rodrigo Portilla Huidobro, se replicó la agrupación en factores de Predisposición, de Necesidad y Facilitadores de atención

- **Predisposición**:Factores que influyen en la probabilidad de que un usuario utilice servicios de salud. Ej., edad (+,- readmisiones, + mortalidad), sexo (hombres, + mortalidad; mujeres, - adherencia), NSE (desempleo, inestabilidad habitacional, + readmisión y mortalidad), estado civil (solteros, + readmisión)

- **Necesidad**: Determinan *directamente* la demanda de asistencia sanitaria. Ej., comorbilidades (+ readmisión y mortalidad), severidad TUS (peores resultados post-tratamiento), policonsumo (+ tasas de readmisión y mortalidad)

- **Habilitadores**: Relacionados con las dinámicas de tto. y logística que facilitan el acceso y la continuidad. Ej., duración (tto. más largo, no tiempre es mejor, hay un punto decreciente; duración óptima para efectividad; estancias muy cortas, peores resultados; 90 días ha sido un marcador bastante utilizado), completar tratamiento (mejores resultados post-tratamiento)

- Por último, factores como la **modalidad** de tratamiento, pueden asociarse a una respuesta diferencial a tratamiento, ya que están dirigidos a poblaciones que se presentan con características biopsicosociales distintas. Pueden estar dirigidos a población general, donde hay tratamientos ambulatorios y residenciales; o, desde 2015, dirigidos específicamente a mujeres cuyas necesidades (hijos, embarazo) hace que requieran un tratamiento que responda a esas necesidades. este abarca ambulatorio intensivo y residencial.
